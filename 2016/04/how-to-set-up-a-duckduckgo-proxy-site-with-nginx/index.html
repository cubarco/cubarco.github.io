<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><title>å¦‚ä½•ç”¨ Nginx æ­å»ºç®€å•çš„ DuckDuckGo ä»£ç†ç«™ - /home/cubarco</title><meta property="og:title" content="å¦‚ä½•ç”¨ Nginx æ­å»ºç®€å•çš„ DuckDuckGo ä»£ç†ç«™ - /home/cubarco"><link href=https://cubl.in/favicon.ico rel=icon type=image/x-icon><meta name=description content="Linux, GFW, DuckDuckGo, Proxy"><link rel=stylesheet href=/css/main.min.3bcbe33ae5c46485bcebc6352fc91232f950eb735ccac53f81bd19d79251ba9c.css media=all></head><body><div class=wrapper><header class=header><nav class=nav><a href=/ class=nav-logo><img src=/images/logo-min.png width=50 height=50 alt=Logo></a><ul class=nav-links><li><a href=/>Index</a></li><li><a href=/tags/>Tags</a></li><li><a href=/about/>About</a></li><li><a href=/links/>Links</a></li><li><a href=https://github.com/cubarco/cubarco.github.io>GitHub</a></li></ul></nav></header><main class=content role=main><article class=article><h1 class=article-title>å¦‚ä½•ç”¨ Nginx æ­å»ºç®€å•çš„ DuckDuckGo ä»£ç†ç«™</h1><span class=article-date>2016-04-09</span>
<a class=article-tag href=/tags/linux>Linux</a>
<a class=article-tag href=/tags/gfw>GFW</a>
<a class=article-tag href=/tags/duckduckgo>DuckDuckGo</a>
<a class=article-tag href=/tags/proxy>Proxy</a><div class=article-content><p>æœ€è¿‘æ„Ÿè§‰æ‰‹æœºçš„ç½‘ç»œç¯å¢ƒç»å¸¸å˜ï¼Œåœ¨å¯å®¤ v6ï¼Œ å‡ºé—¨ v4ï¼Œæœ‰çš„æ—¶å€™ä¼šæ‡’å¾—å¼€ä»£ç†ã€‚æ‰€ä»¥å°±ç”¨ cloudflare+nginx æäº†ä¸ªç®€å•çš„ <a href=https://duckduckgo.com>DuckDuckGo</a> ä»£ç†ç«™ï¼Œæ–¹ä¾¿éšæ—¶æå‡ºæ‰‹æœºæœç´¢ã€‚æ²¡æœ‰é€‰æ‹©ä»£ç† Google æœ‰å‡ ç‚¹åŸå› ï¼Œä¸€ä¸ªæ˜¯ vps è¿ Google ç»å¸¸è®©è¾“éªŒè¯ç ï¼Œå†å°±æ˜¯ DuckDuckGo ä¸å¸¦ cookie çš„æœç´¢ç»“æœè²Œä¼¼æ¯” Google ä¼˜(?)ã€‚</p><h2 id=nginx>Nginx</h2><p>nginx çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ã€‚<code>domain.com</code> æ”¹æˆå…·ä½“çš„åŸŸåï¼Œ<code>/path/to/</code>è¦æ”¹æˆ duck.domain.com çš„è¯ä¹¦è·¯å¾„ã€‚<code>/etc/letsencrypt/live/images.duck.domain.com/</code>æ˜¯ Let&rsquo;s encrypt ç”Ÿæˆè¯ä¹¦çš„é»˜è®¤ç›®å½•ï¼Œç¨åä¼šæåˆ°ã€‚</p><code class=gist data-gist-id=cubarco/08e99fbf316a435b7935727810e40458><p>Gist: <a href=https://gist.github.com/cubarco/08e99fbf316a435b7935727810e40458>cubarco/08e99fbf316a435b7935727810e40458</a></p></code><h2 id=cloudflare>Cloudflare</h2><p>duck.domain.com å¯ä»¥ç”¨ Cloudflare åš CDNï¼Œç„¶å crypto ç­–ç•¥é€‰ Full(éstrict) çš„è¯åœ¨æœåŠ¡å™¨ä¸Šå¯ä»¥éšä¾¿ç»™ duck.domain.com åˆ›å»ºä¸ªè¯ä¹¦ç”¨ï¼Œå…·ä½“å‚ç…§<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>ã€‚ä½†æ˜¯åƒ images.duck.domain.com è¿™ç§ä¸‰çº§åŸŸåçš„è¯ï¼ŒCloudflare æ˜¯æ²¡æœ‰ç»™ SSL è¯ä¹¦çš„ï¼Œæ‰€ä»¥åªå¥½è‡ªå·±åœ¨æœåŠ¡å™¨ä¸Šé…ï¼Œæ¨èç”¨ Let&rsquo;s encrypt ç­¾è¯ä¹¦ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</p><h2 id=lets-encrypt>Let&rsquo;s encrypt</h2><p>Let&rsquo;s encrypt çš„ä½¿ç”¨ç»†èŠ‚æˆ‘å°±ä¸èµ˜è¿°äº†ï¼Œå¯ä»¥çœ‹å®˜æ–¹ç»™çš„ Guide<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</p><p>è¿™é‡Œéœ€è¦çš„ä¸‰ä¸ªè¯ä¹¦å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤ç”Ÿæˆï¼š</p><div class=highlight><pre class=chroma><code class=language-shell data-lang=shell>./letsencrypt-auto certonly --manual -d images.duck.domain.com <span class=se>\
</span><span class=se></span>    -d icons.duck.domain.com <span class=se>\
</span><span class=se></span>    -d ac.duck.domain.com
</code></pre></div><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p><a href=https://gist.github.com/jessedearing/2351836>Create self-signed SSL certificate for Nginx</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p><a href=https://letsencrypt.org/getting-started/>Getting Started @ Let&rsquo;s Encrypt</a>&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div></article><script src=https://utteranc.es/client.js repo=cubarco/cubarco.github.io issue-term=pathname label="Comments ğŸ’¬" theme=boxy-light crossorigin=anonymous async defer></script></main><footer class=footer><ul class=footer-links><li><a href=/index.xml type=application/rss+xml target=_blank>RSS feed</a></li><li><a href=https://gohugo.io/ class=footer-links-kudos target=_blank rel="noopener norefferrer">Made with <img src=/images/hugo-logo.png alt="Img link to Hugo website" width=22 height=22></a></li><li><a>Â© 2014 - 2016</a></li></ul></footer></div><script async src=https://cdn.jsdelivr.net/gh/cubarco/cubarco.github.io@gh-pages/js/async.min.f0ee05a5180b84c9031dc6048a165e3238369671eaac5df72f9fc961a2bb03f78685ba489261432234bcbad8b66c86ffa90cffd19f60c4b28ef06e677fc9763f.js onload=window.GistEmbed.init()></script><script async defer src=https://cdn.jsdelivr.net/npm/instant.page@5.1.0/instantpage.min.js></script><script>window.ga_tid="UA-54867602-1",window.ga_api="https://cubl.in/ga-proxy/"</script><script src=https://cdn.jsdelivr.net/npm/cfga@1.0.3 async defer></script><script async defer data-website-id=e9fdcc32-0bfa-4de5-beb0-3bbf1e4638ab src=https://umami.pwn.ooo/umami.js></script></body></html>